<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Test Lottie — Diagnostic</title>
  <style>
    body{font-family:system-ui,ui-sans-serif;background:#0b1220;color:#e5e7eb;padding:24px}
    .card{max-width:840px;margin:0 auto;background:#111827;border-radius:16px;padding:16px 16px 24px}
    #anim{width:100%;height:420px;max-width:720px;margin:16px auto 0;border-radius:16px;overflow:hidden;background:#fff}
    .ok{color:#16a34a}.ko{color:#dc2626}
  </style>
</head>
<body>
  <div class="card">
    <h1 style="margin:0 0 10px">Test Lottie — Diagnostic (HTML pur)</h1>
    <div id="diag">Initialisation…</div>
    <div id="anim" aria-label="Lottie"></div>
  </div>

  <!-- lottie-web local (pas de CDN) -->
  <script src="/js/lottie.min.js"></script>
  <script>
    (async function(){
      const d = (h)=>document.getElementById('diag').innerHTML=h;
      const ok = (s)=>`<span class="ok">${s}</span>`;
      const ko = (s)=>`<span class="ko">${s}</span>`;
      let json = '…';
      try { const r = await fetch('/lottie/squat-front.json',{method:'HEAD'}); json = r.ok?ok('200'):ko(String(r.status)); } catch { json = ko('ERR'); }
      const has = !!(window && window.lottie);
      d(`<b>lottie.min.js :</b> ${has?ok('chargé'):ko('absent')} &nbsp; | &nbsp; <b>/lottie/squat-front.json :</b> ${json}`);
      if(!has) return;
      try{
        window.lottie.loadAnimation({ container: document.getElementById('anim'), renderer:'svg', loop:true, autoplay:true, path:'/lottie/squat-front.json' });
      }catch(e){ d('Erreur loadAnimation : '+ko(e && e.message || String(e))); }
    })();
  </script>
</body>
</html>
